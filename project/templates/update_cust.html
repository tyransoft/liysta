<!DOCTYPE html>
{% load static %}
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>liysta - ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</title>

    <!-- Ø®Ø·ÙˆØ· Ùˆ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Ù…Ù„ÙØ§Øª CSS -->
    <link rel="stylesheet" href="{% static 'css/lista.css' %}">
    <link rel="stylesheet" href="{% static 'css/edite_cust.css' %}">
    <link rel="icon" href="{% static 'img/fc.png' %}" type="image/x-icon">
</head>

<body>
<div class="add-product-container">

    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <div class="brand-header">
        <div class="brand-logo">Liysta</div>
        <div class="brand-subtitle">Ù…Ù†ØµØªÙƒ Ø§Ù„Ø°ÙƒÙŠØ© Ù„ØªÙ†Ù‚Ù„ Ø¹Ù…Ù„Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø±Ù‚Ù…ÙŠ</div>
    </div>

    <div class="page-header">
        <h1 class="page-title">ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</h1>
    </div>

    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…Ø© (ØºÙŠØ± Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø­Ù‚Ù„ Ù…Ø¹ÙŠÙ†) -->
    {% if form.non_field_errors %}
    <div class="error general-error">
        {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
        {% endfor %}
    </div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data" novalidate>
        {% csrf_token %}

        <!-- Ø§Ù„Ø§Ø³Ù… -->
        <div class="form-group">
            <label for="first_name" class="form-label">Ø§Ù„Ø§Ø³Ù…</label>
            <input type="text" name="first_name" id="first_name" class="form-input"
                value="{% if form.first_name.value %}{{ form.first_name.value }}{% elif customer.user.first_name %}{{ customer.user.first_name }}{% endif %}"
                placeholder="Ø§Ø³Ù…Ùƒ">
            {% if form.first_name.errors %}
                <div class="error">{{ form.first_name.errors|join:", " }}</div>
            {% endif %}
            {% if customer.user %}
                <div class="current-data">Ø§Ù„Ø­Ø§Ù„ÙŠ: {{ customer.user.first_name }}</div>
            {% endif %}
        </div>

        <!-- Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ -->
        <div class="form-group">
            <label for="store_ar_name" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ</label>
            <input type="text" name="store_ar_name" id="store_ar_name" class="form-input" required
                   value="{{ form.store_ar_name.value|default:'' }}" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ">
            {% if form.store_ar_name.errors %}
                <div class="error">{{ form.store_ar_name.errors|join:", " }}</div>
            {% endif %}
            {% if customer.store_ar_name %}
                <div class="current-data">Ø§Ù„Ø­Ø§Ù„ÙŠ: {{ customer.store_ar_name }}</div>
            {% endif %}
        </div>

        <!-- Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ -->
        <div class="form-group">
            <label for="store_en_name" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</label>
            <input type="text" name="store_en_name" id="store_en_name" class="form-input" required
                   value="{{ form.store_en_name.value|default:'' }}" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">
            {% if form.store_en_name.errors %}
                <div class="error">{{ form.store_en_name.errors|join:", " }}</div>
            {% endif %}
            {% if customer.store_en_name %}
                <div class="current-data">Ø§Ù„Ø­Ø§Ù„ÙŠ: {{ customer.store_en_name }}</div>
            {% endif %}
        </div>

        <!-- Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ -->
        <div class="form-group">
            <label for="id_phone" class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
            <div class="phone-input-container">
                <input type="tel" name="phone" id="id_phone" class="form-input phone-input"
                       value="{{ form.phone.value|default:'' }}" placeholder="5XXXXXXXX">
            </div>
            {% if form.phone.errors %}
                <div class="error">{{ form.phone.errors|join:", " }}</div>
            {% endif %}
            {% if customer.phone %}
                <div class="current-data">Ø§Ù„Ø­Ø§Ù„ÙŠ: {{ customer.phone }}</div>
            {% endif %}
        </div>

        <!-- Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ -->
        <div class="form-group">
            <label for="location_url" class="form-label">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <button type="button" onclick="getLocation()" class="submit-btn" style="background:#4B5563;margin-bottom:10px;">
                ğŸ“ Ø­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹ÙŠ
            </button>
            <input type="text" name="location_url" id="location_url" class="form-input"
                   value="{{ form.location_url.value|default:'' }}" placeholder="Ø±Ø§Ø¨Ø· Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
            {% if form.location_url.errors %}
                <div class="error">{{ form.location_url.errors|join:", " }}</div>
            {% endif %}
            {% if customer.location_url %}
                <div class="current-data">
                    Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ:
                    <a href="{{ customer.location_url }}" target="_blank" style="color:var(--primary);text-decoration:underline;">
                        Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
                    </a>
                </div>
            {% endif %}
        </div>

        <!-- Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØ¬Ø± -->
        <div class="form-group">
            <label for="id_store_kind" class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØ¬Ø±</label>
            <select name="store_kind" id="id_store_kind" class="form-input">
                {% for value, label in form.store_kind.field.choices %}
                    <option value="{{ value }}" {% if form.store_kind.value == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
            {% if form.store_kind.errors %}
                <div class="error">{{ form.store_kind.errors|join:", " }}</div>
            {% endif %}
            {% if customer.get_store_kind_display %}
                <div class="current-data">Ø§Ù„Ø­Ø§Ù„ÙŠ: {{ customer.get_store_kind_display }}</div>
            {% endif %}
        </div>

        <!-- Ø²Ø± Ø§Ù„Ø­ÙØ¸ -->
        <button type="submit" class="submit-btn">
            <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
        </button>
    </form>
</div>

<!-- Ø³ÙƒØ±Ø¨ØªØ§Øª -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const formGroups = document.querySelectorAll('.form-group');
    formGroups.forEach((group, index) => {
        group.style.opacity = '0';
        group.style.transform = 'translateY(20px)';
        group.style.transition = `all 0.5s ease ${index * 0.1}s`;
        setTimeout(() => {
            group.style.opacity = '1';
            group.style.transform = 'translateY(0)';
        }, 100);
    });

    const phoneInput = document.getElementById('id_phone');
    if (phoneInput) {
        phoneInput.addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    }
});

// ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError, { enableHighAccuracy: true });
    } else {
        alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ");
    }
}

function showPosition(position) {
    const lat = position.coords.latitude;
    const lng = position.coords.longitude;
    const url = `https://www.google.com/maps?q=${lat},${lng}`;
    document.getElementById("location_url").value = url;
    alert("ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­!");
}

function showError() {
    alert("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† Ù„Ù„Ù…ØªØµÙØ­.");
}
</script>
</body>
</html>
